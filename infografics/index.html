<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografika: DI Švietimo Technologijų Rinka</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F0F4F8; 
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; 
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .stat-card {
            background-color: #073B4C;
            color: white;
        }
        .section-title {
            color: #073B4C; 
        }
        .card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .swot-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        .swot-item {
            padding: 1rem;
            border-radius: 0.375rem;
        }
        .flow-item {
            border: 2px solid #118AB2;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            text-align: center;
            background-color: #E0F7FA; 
            color: #073B4C;
        }
        .flow-arrow {
            font-size: 1.5rem;
            color: #118AB2;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .nav-sticky {
            position: sticky;
            top: 0;
            z-index: 50;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        #llmModal {
            transition: opacity 0.3s ease-in-out;
        }
        #llmModal.hidden {
            opacity: 0;
            pointer-events: none;
        }
        #llmModal > div {
            transform: translateY(20px);
            transition: transform 0.3s ease-in-out;
        }
        #llmModal.hidden > div {
            transform: translateY(0);
        }
    </style>
</head>
<body class="text-gray-800">

    <nav class="nav-sticky p-4 mb-8">
        <div class="container mx-auto flex flex-wrap justify-center space-x-4">
            <a href="#overview" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">Rinkos Apžvalga</a>
            <a href="#trends" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">Technologijų Tendencijos</a>
            <a href="#competitive" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">Konkurencinė Aplinka</a>
            <a href="#consumer" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">Vartotojų Įžvalgos</a>
            <a href="#future" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">Ateities Perspektyvos</a>
            <a href="#qa" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">Klausimai ir Atsakymai</a>
        </div>
    </nav>

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold section-title mb-4">Ateitis yra Personalizuota: DI Švietimo Technologijose</h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">Tyrinėjant dirbtinio intelekto transformacinį poveikį mokymosi patirčiai, rinkos dinamikai ir ateities švietimo paradigmoms.</p>
            <div class="mt-8 card stat-card p-8 max-w-md mx-auto">
                <p class="text-2xl font-semibold mb-2">Pasaulinė DI švietimo technologijų rinkos prognozė</p>
                <p class="text-5xl font-bold text-[#06D6A0]">$40 Milijardų</p>
                <p class="text-xl mt-2">iki 2025 m.</p>
            </div>
        </header>

        <section id="overview" class="mb-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">Rinkos Apžvalga</h2>
            <p class="text-gray-700 mb-4 text-center max-w-2xl mx-auto">DI švietimo technologijų rinka sparčiai plečiasi, skatinama didėjančios personalizuotų ir adaptyvių mokymosi sprendimų paklausos. Šiame skyriuje pabrėžiama rinkos augimo trajektorija ir jos segmentavimas pagal įvairias galutinio vartotojo grupes.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Rinkos dydis ir augimas (mlrd. USD)</h3>
                    <p class="text-sm text-gray-600 mb-2">Ši diagrama iliustruoja prognozuojamą pasaulinės DI švietimo technologijų rinkos augimą, rodantį stiprią augimo tendenciją didėjant priėmimui.</p>
                    <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('Rinkos dydis ir augimas', 'Rinkos vertė (mlrd. USD) nuo 2020 iki 2025 m., su vertėmis: 5.2, 8.1, 12.5, 19.0, 28.5, 40.0. Tai rodo spartų augimą.')">✨ Išsamiau</button>
                    <div class="chart-container h-[300px] md:h-[350px]">
                        <canvas id="marketSizeChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Rinkos segmentavimas pagal galutinį vartotoją (2023 m.)</h3>
                     <p class="text-sm text-gray-600 mb-2">DI švietimo technologijose aptarnauja įvairius segmentus. Ikimokyklinis-12 ir aukštasis mokslas šiuo metu dominuoja, o įmonių mokymai rodo didelį augimo potencialą.</p>
                     <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('Rinkos segmentavimas pagal galutinį vartotoją', 'Rinkos dalies procentai ikimokykliniam-12 švietimui (40%), aukštajam mokslui (30%), įmonių mokymams (20%) ir visą gyvenimą besimokantiems (10%).')">✨ Išsamiau</button>
                    <div class="chart-container h-[300px] md:h-[350px]">
                        <canvas id="marketSegmentationChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="trends" class="mb-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">Pagrindinės Technologijų Tendencijos</h2>
            <p class="text-gray-700 mb-4 text-center max-w-2xl mx-auto">Keletas DI pagrįstų technologijų yra švietimo technologijų sektoriaus inovacijų priešakyje. Jų priėmimo rodiklių supratimas yra labai svarbus nustatant pagrindinius rinkos evoliucijos variklius ir galimybių sritis.</p>
            <div class="card">
                <h3 class="text-xl font-semibold section-title mb-4">Pagrindinių DI įrankių priėmimo rodikliai (%)</h3>
                <p class="text-sm text-gray-600 mb-2">Personalizuoti mokymosi keliai ir DI mokymo sistemos rodo didžiausią priėmimą, atspindintį pritaikytų švietimo patirčių paklausą.</p>
                <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('Pagrindinių DI įrankių priėmimo rodikliai', 'DI mokymo sistemų (65%), personalizuotų mokymosi kelių (75%), automatizuotų vertinimo sistemų (50%), DI pagrįsto turinio kūrimo (40%), išmaniųjų priežiūros įrankių (30%) priėmimo rodikliai.')">✨ Išsamiau</button>
                <div class="chart-container h-[400px] md:h-[450px]">
                    <canvas id="techAdoptionChart"></canvas>
                </div>
            </div>
        </section>

        <section id="competitive" class="mb-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">Konkurencinė Aplinka</h2>
            <p class="text-gray-700 mb-4 text-center max-w-2xl mx-auto">DI švietimo technologijų rinka yra dinamiška, joje veikia tiek įsitvirtinę žaidėjai, tiek inovatyvūs startuoliai. Šiame skyriuje pateikiama konkurencinės padėties apžvalga ir bendra pramonės SSGG analizė.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">3 didžiausių žaidėjų rinkos dalis (apytiksliai)</h3>
                    <p class="text-sm text-gray-600 mb-2">Rinka yra gana suskaidyta, tačiau atsiranda keletas pagrindinių žaidėjų, turinčių didelę rinkos dalį.</p>
                    <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('3 didžiausių žaidėjų rinkos dalis', 'Apytikslė rinkos dalis LearnSphere AI (35%), EduBotics Inc. (28%) ir AdaptiveMind Tech (22%).')">✨ Išsamiau</button>
                    <div class="chart-container h-[300px] md:h-[350px]">
                        <canvas id="marketShareChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Pramonės SSGG analizė</h3>
                    <p class="text-sm text-gray-600 mb-4">Bendra DI švietimo technologijų pramonės stiprybių, silpnybių, galimybių ir grėsmių apžvalga.</p>
                    <div class="swot-grid">
                        <div class="swot-item bg-green-100 text-green-700">
                            <h4 class="font-bold mb-1">Stiprybės 💪</h4>
                            <ul class="list-disc list-inside text-sm">
                                <li>Personalizuotas mokymasis</li>
                                <li>Pagerintas prieinamumas</li>
                                <li>Veiklos efektyvumas</li>
                                <li>Duomenimis pagrįstos įžvalgos</li>
                            </ul>
                        </div>
                        <div class="swot-item bg-red-100 text-red-700">
                            <h4 class="font-bold mb-1">Silpnybės 📉</h4>
                            <ul class="list-disc list-inside text-sm">
                                <li>Duomenų privatumo problemos</li>
                                <li>Didelės pradinės išlaidos</li>
                                <li>Skaitmeninės atskirties problemos</li>
                                <li>Mokytojų mokymo poreikis</li>
                            </ul>
                        </div>
                        <div class="swot-item bg-blue-100 text-blue-700">
                            <h4 class="font-bold mb-1">Galimybės 🚀</h4>
                            <ul class="list-disc list-inside text-sm">
                                <li>Neišnaudotos pasaulinės rinkos</li>
                                <li>Integracija su VR/AR</li>
                                <li>Įmonių kvalifikacijos kėlimas</li>
                                <li>Visą gyvenimą trunkančio mokymosi platformos</li>
                            </ul>
                        </div>
                        <div class="swot-item bg-yellow-100 text-yellow-700">
                            <h4 class="font-bold mb-1">Grėsmės ⚠️</h4>
                            <ul class="list-disc list-inside text-sm">
                                <li>Spartus technologijų pasenimas</li>
                                <li>Etiniai DI iššūkiai</li>
                                <li>Atsparumas pokyčiams</li>
                                <li>Kibernetinio saugumo rizika</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="consumer" class="mb-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">Vartotojų Įžvalgos</h2>
            <p class="text-gray-700 mb-4 text-center max-w-2xl mx-auto">Mokinių ir pedagogų poreikių ir motyvacijos supratimas yra labai svarbus kuriant sėkmingus DI švietimo technologijų sprendimus. Šiame skyriuje nagrinėjama, ką vartotojai labiausiai vertina.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Pagrindiniai priėmimo veiksniai</h3>
                    <p class="text-sm text-gray-600 mb-2">Ši radaro diagrama rodo įvairių veiksnių, turinčių įtakos DI švietimo technologijų įrankių priėmimui, santykinę svarbą, remiantis vartotojų apklausomis (balai 1-5).</p>
                    <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('Pagrindiniai priėmimo veiksniai', 'Svarbos balai už pagerintus rezultatus (4.5), laiko taupymą (4.0), ekonomiškumą (3.5), įsitraukimą (4.2) ir prieinamumą (3.8).')">✨ Išsamiau</button>
                    <div class="chart-container h-[350px] md:h-[400px]">
                        <canvas id="adoptionDriversChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Pirminiai vartotojų poreikiai</h3>
                    <p class="text-sm text-gray-600 mb-4">Mokiniai ir pedagogai pirmenybę teikia sprendimams, kurie yra įtraukiantys, efektyvūs ir siūlo personalizuotą palaikymą bei lankstumą.</p>
                    <ul class="space-y-3">
                        <li class="flex items-center text-lg"><span class="mr-3 text-2xl text-[#06D6A0]">🎓</span> Įtraukiantis ir interaktyvus turinys</li>
                        <li class="flex items-center text-lg"><span class="mr-3 text-2xl text-[#FFD166]">📈</span> Išmatuojama pažanga ir rezultatai</li>
                        <li class="flex items-center text-lg"><span class="mr-3 text-2xl text-[#118AB2]">👩‍🏫</span> Personalizuotas palaikymas ir grįžtamasis ryšys</li>
                        <li class="flex items-center text-lg"><span class="mr-3 text-2xl text-[#FF6B6B]">🌐</span> Lankstus ir prieinamas mokymasis</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="future" class="mb-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">Ateities Perspektyvos ir Galimybės</h2>
            <p class="text-gray-700 mb-4 text-center max-w-2xl mx-auto">DI ateitis švietimo technologijose yra daug žadanti, numatomas reikšmingas augimas įvairiuose regionuose ir atsirandančios naujos galimybės visoje vertės grandinėje.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Prognozuojamas CAGR pagal regioną (kiti 5 metai)</h3>
                    <p class="text-sm text-gray-600 mb-2">Tikimasi, kad Azijos ir Ramiojo vandenyno regionas pirmauja augimu, skatinamas didelio studentų skaičiaus ir didėjančių vyriausybės investicijų į skaitmeninį švietimą.</p>
                    <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('Prognozuojamas CAGR pagal regioną', 'Prognozuojamas sudėtinis metinis augimo tempas (CAGR) Šiaurės Amerikai (18%), Europai (22%), Azijos ir Ramiojo vandenyno regionui (30%), Lotynų Amerikai (25%) ir MEA (20%).')">✨ Išsamiau</button>
                    <div class="chart-container h-[350px] md:h-[400px]">
                        <canvas id="regionalGrowthChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Atsirandančios vertės grandinės galimybės</h3>
                    <p class="text-sm text-gray-600 mb-4">DI kuria naują vertę kiekviename švietimo proceso etape, skatindamas labiau tarpusavyje sujungtą ir protingą mokymosi ekosistemą.</p>
                    <div class="space-y-4">
                        <div class="flow-item">DI papildytas turinio kūrimas</div>
                        <div class="flow-arrow">⬇️</div>
                        <div class="flow-item">Debesų pagrindu veikiančių platformų pristatymas</div>
                        <div class="flow-arrow">⬇️</div>
                        <div class="flow-item">Adaptyvus DI personalizuotas mokymasis</div>
                        <div class="flow-arrow">⬇️</div>
                        <div class="flow-item">Automatinis vertinimas ir grįžtamasis ryšys</div>
                        <div class="flow-arrow">⬇️</div>
                        <div class="flow-item">Duomenimis pagrįsta visą gyvenimą trunkančio mokymosi ekosistema</div>
                    </div>
                    <button class="bg-[#118AB2] text-white px-4 py-2 rounded-md hover:bg-[#0E7DA0] focus:outline-none focus:ring-2 focus:ring-[#118AB2] focus:ring-opacity-50 mt-6 w-full" onclick="generateFutureScenario()">✨ Generuoti ateities scenarijų</button>
                </div>
            </div>
        </section>

        <section id="qa" class="mb-12 pt-16 -mt-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">Klausimai ir Atsakymai apie DI Švietimo Technologijose</h2>
            <div class="card p-6">
                <p class="mb-4 text-lg">Užduokite klausimą apie infografikos turinį ir gaukite DI sugeneruotą atsakymą.</p>
                <div class="mb-4">
                    <label for="qaInput" class="block text-sm font-medium text-gray-700 mb-2">Jūsų klausimas:</label>
                    <textarea id="qaInput" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-[#118AB2] focus:border-[#118AB2]"></textarea>
                </div>
                <button class="bg-[#073B4C] text-white px-6 py-2 rounded-md hover:bg-[#052F3A] focus:outline-none focus:ring-2 focus:ring-[#073B4C] focus:ring-opacity-50 text-lg w-full" onclick="askQuestion()">✨ Klausti</button>
                <div id="qaResponse" class="mt-6 p-4 bg-gray-50 rounded-md border border-gray-200 text-gray-800 hidden">
                    <h4 class="font-semibold mb-2">Atsakymas:</h4>
                    <p id="qaResponseContent"></p>
                </div>
            </div>
        </section>

        <footer class="text-center py-8 border-t border-gray-300">
            <p class="text-gray-600">&copy; 2025 DI švietimo technologijų rinkos įžvalgos. Visos teisės saugomos.</p>
            <p class="text-sm text-gray-500 mt-1">Ši infografika pateikia apibendrintą apžvalgą, pagrįstą pramonės analize.</p>
        </footer>

    </div>

    <div id="llmModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 w-11/12 md:w-1/2 lg:w-1/3">
            <div class="flex justify-between items-center mb-4">
                <h3 id="llmModalTitle" class="text-xl font-bold text-[#073B4C]"></h3>
                <button id="closeLlmModal" class="text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
            </div>
            <div id="llmModalContent" class="text-gray-700 text-base mb-4"></div>
            <div id="llmLoadingIndicator" class="text-center text-[#118AB2] hidden">Įkeliama...</div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        let app;
        let auth;

        async function initializeFirebaseAndAuth() {
            try {
                const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
                app = initializeApp(firebaseConfig);
                auth = getAuth(app);

                if (typeof __initial_auth_token !== 'undefined') {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Klaida inicijuojant Firebase arba prisijungiant:", error);
            }
        }
        initializeFirebaseAndAuth();

        const primaryTextColor = '#073B4C';
        const gridColor = '#E5E7EB';
        const tooltipBackgroundColor = '#FFFFFF';
        const tooltipTitleColor = '#073B4C';
        const tooltipBodyColor = '#374151';

        const chartColors = ['#118AB2', '#06D6A0', '#FFD166', '#FF6B6B', '#073B4C', '#EE92C2'];

        function wrapLabel(str, maxWidth) {
            if (str.length <= maxWidth) {
                return str;
            }
            const words = str.split(' ');
            let currentLine = '';
            const lines = [];
            for (const word of words) {
                if ((currentLine + word).length <= maxWidth || currentLine === '') {
                    currentLine += (currentLine === '' ? '' : ' ') + word;
                } else {
                    lines.push(currentLine);
                    currentLine = word;
                }
            }
            lines.push(currentLine);
            return lines;
        }
        
        const commonChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: primaryTextColor,
                        font: { size: 12 }
                    }
                },
                tooltip: {
                    backgroundColor: tooltipBackgroundColor,
                    titleColor: tooltipTitleColor,
                    bodyColor: tooltipBodyColor,
                    borderColor: '#06D6A0',
                    borderWidth: 1,
                    padding: 10,
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                              return label.join(' ');
                            } else {
                              return label;
                            }
                        }
                    }
                }
            },
            scales: {
                x: {
                    ticks: { color: primaryTextColor, font: { size: 11 } },
                    grid: { color: gridColor, drawOnChartArea: false }
                },
                y: {
                    ticks: { color: primaryTextColor, font: { size: 11 } },
                    grid: { color: gridColor }
                }
            }
        };

        new Chart(document.getElementById('marketSizeChart'), {
            type: 'line',
            data: {
                labels: ['2020', '2021', '2022', '2023', wrapLabel('2024 Prognozuojama', 16), wrapLabel('2025 Prognozuojama', 16)],
                datasets: [{
                    label: 'Rinkos vertė (mlrd. USD)',
                    data: [5.2, 8.1, 12.5, 19.0, 28.5, 40.0],
                    borderColor: chartColors[0],
                    backgroundColor: chartColors[0] + '33',
                    tension: 0.3,
                    fill: true,
                }]
            },
            options: {...commonChartOptions}
        });

        new Chart(document.getElementById('marketSegmentationChart'), {
            type: 'doughnut',
            data: {
                labels: [wrapLabel('Ikimokyklinis-12 Švietimas', 16), wrapLabel('Aukštasis Mokslas', 16), wrapLabel('Įmonių Mokymai', 16), wrapLabel('Visą Gyvenimą Besimokantys', 16)],
                datasets: [{
                    label: 'Rinkos dalis %',
                    data: [40, 30, 20, 10],
                    backgroundColor: chartColors,
                    borderColor: '#FFFFFF',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                 plugins: {
                    legend: { position: 'bottom', labels: { color: primaryTextColor, font: { size: 12 } } },
                    tooltip: commonChartOptions.plugins.tooltip
                }
            }
        });

        new Chart(document.getElementById('techAdoptionChart'), {
            type: 'bar',
            data: {
                labels: [wrapLabel('DI Mokymo Sistemos', 16), wrapLabel('Personalizuoti Mokymosi Keliai', 16), wrapLabel('Automatinės Vertinimo Sistemos', 16), wrapLabel('DI pagrįstas Turinio Kūrimas', 16), wrapLabel('Išmanieji Priežiūros Įrankiai', 16)],
                datasets: [{
                    label: 'Priėmimo rodiklis (%)',
                    data: [65, 75, 50, 40, 30],
                    backgroundColor: chartColors[2],
                    borderColor: chartColors[2],
                    borderWidth: 1
                }]
            },
            options: {
                ...commonChartOptions,
                indexAxis: 'y', 
                scales: {
                    x: { ...commonChartOptions.scales.x, grid: { drawOnChartArea: true } },
                    y: { ...commonChartOptions.scales.y, grid: { drawOnChartArea: false } }
                }
            }
        });

        new Chart(document.getElementById('marketShareChart'), {
            type: 'bar',
            data: {
                labels: [wrapLabel('LearnSphere AI', 16), wrapLabel('EduBotics Inc.', 16), wrapLabel('AdaptiveMind Tech', 16)],
                datasets: [{
                    label: 'Apytikslė rinkos dalis (%)',
                    data: [35, 28, 22],
                    backgroundColor: [chartColors[0], chartColors[1], chartColors[3]],
                    borderColor: [chartColors[0], chartColors[1], chartColors[3]],
                    borderWidth: 1
                }]
            },
            options: {...commonChartOptions, plugins: {...commonChartOptions.plugins, legend: {display: false}}}
        });

        new Chart(document.getElementById('adoptionDriversChart'), {
            type: 'radar',
            data: {
                labels: [wrapLabel('Pagerinti Rezultatai', 16), wrapLabel('Laiko Taupymas', 16), wrapLabel('Ekonomiškumas', 16), 'Įsitraukimas', 'Prieinamumas'],
                datasets: [{
                    label: 'Svarbos balas (1-5)',
                    data: [4.5, 4.0, 3.5, 4.2, 3.8],
                    backgroundColor: chartColors[1] + '66', 
                    borderColor: chartColors[1],
                    pointBackgroundColor: chartColors[1],
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: chartColors[1]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top', labels: { color: primaryTextColor, font: {size: 12} } },
                    tooltip: commonChartOptions.plugins.tooltip
                },
                scales: {
                    r: {
                        angleLines: { color: gridColor },
                        grid: { color: gridColor },
                        pointLabels: { color: primaryTextColor, font: { size: 11 } },
                        ticks: { backdropColor: 'transparent', color: primaryTextColor, stepSize: 1, font: {size: 10} },
                        min: 0,
                        max: 5
                    }
                }
            }
        });

        new Chart(document.getElementById('regionalGrowthChart'), {
            type: 'bar',
            data: {
                labels: [wrapLabel('Šiaurės Amerika', 16), 'Europa', wrapLabel('Azijos ir Ramiojo vandenyno', 16), wrapLabel('Lotynų Amerika', 16), 'MEA'],
                datasets: [{
                    label: 'Prognozuojamas CAGR (%)',
                    data: [18, 22, 30, 25, 20],
                    backgroundColor: chartColors[3],
                    borderColor: chartColors[3],
                    borderWidth: 1
                }]
            },
             options: {...commonChartOptions, plugins: {...commonChartOptions.plugins, legend: {display: false}}}
        });

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    const offset = document.querySelector('.nav-sticky').offsetHeight;
                    const elementPosition = targetElement.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - offset;
                    
                    window.scrollTo({
                        top: offsetPosition,
                        behavior: "smooth"
                    });
                }
            });
        });

        const llmModal = document.getElementById('llmModal');
        const llmModalTitle = document.getElementById('llmModalTitle');
        const llmModalContent = document.getElementById('llmModalContent');
        const llmLoadingIndicator = document.getElementById('llmLoadingIndicator');
        const closeLlmModal = document.getElementById('closeLlmModal');

        closeLlmModal.addEventListener('click', () => {
            llmModal.classList.add('hidden');
        });

        llmModal.addEventListener('click', (event) => {
            if (event.target === llmModal) {
                llmModal.classList.add('hidden');
            }
        });

        async function callGeminiAPI(prompt) {
            llmLoadingIndicator.classList.remove('hidden');
            llmModalContent.innerHTML = ''; 

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    llmModalContent.innerHTML = text;
                } else {
                    llmModalContent.innerHTML = "Atsiprašome, nepavyko sugeneruoti atsakymo. Bandykite dar kartą.";
                    console.error("Netikėta API atsakymo struktūra:", result);
                }
            } catch (error) {
                llmModalContent.innerHTML = "Įvyko klaida gaunant atsakymą. Patikrinkite savo tinklo ryšį.";
                console.error("Klaida kviečiant Gemini API:", error);
            } finally {
                llmLoadingIndicator.classList.add('hidden');
            }
        }

        window.showLlmDeepDive = async function(chartTitle, chartDataDescription) {
            llmModalTitle.textContent = `Išsamiau: ${chartTitle}`;
            llmModal.classList.remove('hidden');
            const prompt = `Paaiškinkite pagrindines tendencijas ir pasekmes, parodytas diagramoje apie "${chartTitle}", su duomenų taškais, tokiais kaip "${chartDataDescription}". Sutelkite dėmesį į tai, ką šie duomenys reiškia DI švietimo technologijų rinkai. Būkite glausti, maždaug 4-5 sakiniai.`;
            await callGeminiAPI(prompt);
        }

        window.generateFutureScenario = async function() {
            llmModalTitle.textContent = 'Ateities Scenarijus DI švietimo technologijose';
            llmModal.classList.remove('hidden');
            const prompt = `Remiantis dabartinėmis DI švietimo technologijų tendencijomis, sugeneruokite trumpą, išradingą ir realistišką ateities scenarijų (pvz., po 5-10 metų), sutelkiant dėmesį į tai, kaip mokymasis gali būti transformuotas. Būkite glausti, maždaug 3-4 sakiniai.`;
            await callGeminiAPI(prompt);
        }

        window.askQuestion = async function() {
            const qaInput = document.getElementById('qaInput');
            const question = qaInput.value.trim();
            const qaResponseDiv = document.getElementById('qaResponse');
            const qaResponseContent = document.getElementById('qaResponseContent');

            if (!question) {
                qaResponseContent.textContent = 'Prašome įvesti klausimą.';
                qaResponseDiv.classList.remove('hidden');
                return;
            }

            llmModalTitle.textContent = 'Atsakymas į klausimą';
            llmModal.classList.remove('hidden');
            qaResponseDiv.classList.add('hidden'); // Hide previous response if any

            const fullReportContent = document.body.innerText; // Get all visible text from the body
            const prompt = `Atsakykite į šį klausimą remdamiesi pateikta informacija apie dirbtinio intelekto panaudojimą švietimo technologijose. Jei atsakymo nėra pateiktoje informacijoje, nurodykite tai. Klausimas: "${question}". Informacija: ${fullReportContent.substring(0, 3000)}...`; // Limit content length
            await callGeminiAPI(prompt);
            qaResponseDiv.classList.remove('hidden');
            qaResponseContent.textContent = llmModalContent.textContent; // Copy LLM response to Q&A section
            llmModal.classList.add('hidden'); // Close modal after copying to Q&A section
        }

    </script>
</body>
</html>
