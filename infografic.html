<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografika: DI Å vietimo TechnologijÅ³ Rinka</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F0F4F8; 
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; 
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .stat-card {
            background-color: #073B4C;
            color: white;
        }
        .section-title {
            color: #073B4C; 
        }
        .card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .swot-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        .swot-item {
            padding: 1rem;
            border-radius: 0.375rem;
        }
        .flow-item {
            border: 2px solid #118AB2;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            text-align: center;
            background-color: #E0F7FA; 
            color: #073B4C;
        }
        .flow-arrow {
            font-size: 1.5rem;
            color: #118AB2;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .nav-sticky {
            position: sticky;
            top: 0;
            z-index: 50;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        #llmModal {
            transition: opacity 0.3s ease-in-out;
        }
        #llmModal.hidden {
            opacity: 0;
            pointer-events: none;
        }
        #llmModal > div {
            transform: translateY(20px);
            transition: transform 0.3s ease-in-out;
        }
        #llmModal.hidden > div {
            transform: translateY(0);
        }
    </style>
</head>
<body class="text-gray-800">

    <nav class="nav-sticky p-4 mb-8">
        <div class="container mx-auto flex flex-wrap justify-center space-x-4">
            <a href="#overview" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">Rinkos ApÅ¾valga</a>
            <a href="#trends" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">TechnologijÅ³ Tendencijos</a>
            <a href="#competitive" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">KonkurencinÄ— Aplinka</a>
            <a href="#consumer" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">VartotojÅ³ Ä®Å¾valgos</a>
            <a href="#future" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">Ateities Perspektyvos</a>
            <a href="#qa" class="text-[#118AB2] hover:text-[#073B4C] font-semibold">Klausimai ir Atsakymai</a>
        </div>
    </nav>

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold section-title mb-4">Ateitis yra Personalizuota: DI Å vietimo Technologijose</h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">TyrinÄ—jant dirbtinio intelekto transformacinÄ¯ poveikÄ¯ mokymosi patirÄiai, rinkos dinamikai ir ateities Å¡vietimo paradigmoms.</p>
            <div class="mt-8 card stat-card p-8 max-w-md mx-auto">
                <p class="text-2xl font-semibold mb-2">PasaulinÄ— DI Å¡vietimo technologijÅ³ rinkos prognozÄ—</p>
                <p class="text-5xl font-bold text-[#06D6A0]">$40 MilijardÅ³</p>
                <p class="text-xl mt-2">iki 2025 m.</p>
            </div>
        </header>

        <section id="overview" class="mb-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">Rinkos ApÅ¾valga</h2>
            <p class="text-gray-700 mb-4 text-center max-w-2xl mx-auto">DI Å¡vietimo technologijÅ³ rinka sparÄiai pleÄiasi, skatinama didÄ—janÄios personalizuotÅ³ ir adaptyviÅ³ mokymosi sprendimÅ³ paklausos. Å iame skyriuje pabrÄ—Å¾iama rinkos augimo trajektorija ir jos segmentavimas pagal Ä¯vairias galutinio vartotojo grupes.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Rinkos dydis ir augimas (mlrd. USD)</h3>
                    <p class="text-sm text-gray-600 mb-2">Å i diagrama iliustruoja prognozuojamÄ… pasaulinÄ—s DI Å¡vietimo technologijÅ³ rinkos augimÄ…, rodantÄ¯ stipriÄ… augimo tendencijÄ… didÄ—jant priÄ—mimui.</p>
                    <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('Rinkos dydis ir augimas', 'Rinkos vertÄ— (mlrd. USD) nuo 2020 iki 2025 m., su vertÄ—mis: 5.2, 8.1, 12.5, 19.0, 28.5, 40.0. Tai rodo spartÅ³ augimÄ….')">âœ¨ IÅ¡samiau</button>
                    <div class="chart-container h-[300px] md:h-[350px]">
                        <canvas id="marketSizeChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Rinkos segmentavimas pagal galutinÄ¯ vartotojÄ… (2023 m.)</h3>
                     <p class="text-sm text-gray-600 mb-2">DI Å¡vietimo technologijose aptarnauja Ä¯vairius segmentus. Ikimokyklinis-12 ir aukÅ¡tasis mokslas Å¡iuo metu dominuoja, o Ä¯moniÅ³ mokymai rodo didelÄ¯ augimo potencialÄ….</p>
                     <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('Rinkos segmentavimas pagal galutinÄ¯ vartotojÄ…', 'Rinkos dalies procentai ikimokykliniam-12 Å¡vietimui (40%), aukÅ¡tajam mokslui (30%), Ä¯moniÅ³ mokymams (20%) ir visÄ… gyvenimÄ… besimokantiems (10%).')">âœ¨ IÅ¡samiau</button>
                    <div class="chart-container h-[300px] md:h-[350px]">
                        <canvas id="marketSegmentationChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="trends" class="mb-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">PagrindinÄ—s TechnologijÅ³ Tendencijos</h2>
            <p class="text-gray-700 mb-4 text-center max-w-2xl mx-auto">Keletas DI pagrÄ¯stÅ³ technologijÅ³ yra Å¡vietimo technologijÅ³ sektoriaus inovacijÅ³ prieÅ¡akyje. JÅ³ priÄ—mimo rodikliÅ³ supratimas yra labai svarbus nustatant pagrindinius rinkos evoliucijos variklius ir galimybiÅ³ sritis.</p>
            <div class="card">
                <h3 class="text-xl font-semibold section-title mb-4">PagrindiniÅ³ DI Ä¯rankiÅ³ priÄ—mimo rodikliai (%)</h3>
                <p class="text-sm text-gray-600 mb-2">Personalizuoti mokymosi keliai ir DI mokymo sistemos rodo didÅ¾iausiÄ… priÄ—mimÄ…, atspindintÄ¯ pritaikytÅ³ Å¡vietimo patirÄiÅ³ paklausÄ….</p>
                <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('PagrindiniÅ³ DI Ä¯rankiÅ³ priÄ—mimo rodikliai', 'DI mokymo sistemÅ³ (65%), personalizuotÅ³ mokymosi keliÅ³ (75%), automatizuotÅ³ vertinimo sistemÅ³ (50%), DI pagrÄ¯sto turinio kÅ«rimo (40%), iÅ¡maniÅ³jÅ³ prieÅ¾iÅ«ros Ä¯rankiÅ³ (30%) priÄ—mimo rodikliai.')">âœ¨ IÅ¡samiau</button>
                <div class="chart-container h-[400px] md:h-[450px]">
                    <canvas id="techAdoptionChart"></canvas>
                </div>
            </div>
        </section>

        <section id="competitive" class="mb-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">KonkurencinÄ— Aplinka</h2>
            <p class="text-gray-700 mb-4 text-center max-w-2xl mx-auto">DI Å¡vietimo technologijÅ³ rinka yra dinamiÅ¡ka, joje veikia tiek Ä¯sitvirtinÄ™ Å¾aidÄ—jai, tiek inovatyvÅ«s startuoliai. Å iame skyriuje pateikiama konkurencinÄ—s padÄ—ties apÅ¾valga ir bendra pramonÄ—s SSGG analizÄ—.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">3 didÅ¾iausiÅ³ Å¾aidÄ—jÅ³ rinkos dalis (apytiksliai)</h3>
                    <p class="text-sm text-gray-600 mb-2">Rinka yra gana suskaidyta, taÄiau atsiranda keletas pagrindiniÅ³ Å¾aidÄ—jÅ³, turinÄiÅ³ didelÄ™ rinkos dalÄ¯.</p>
                    <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('3 didÅ¾iausiÅ³ Å¾aidÄ—jÅ³ rinkos dalis', 'ApytikslÄ— rinkos dalis LearnSphere AI (35%), EduBotics Inc. (28%) ir AdaptiveMind Tech (22%).')">âœ¨ IÅ¡samiau</button>
                    <div class="chart-container h-[300px] md:h-[350px]">
                        <canvas id="marketShareChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">PramonÄ—s SSGG analizÄ—</h3>
                    <p class="text-sm text-gray-600 mb-4">Bendra DI Å¡vietimo technologijÅ³ pramonÄ—s stiprybiÅ³, silpnybiÅ³, galimybiÅ³ ir grÄ—smiÅ³ apÅ¾valga.</p>
                    <div class="swot-grid">
                        <div class="swot-item bg-green-100 text-green-700">
                            <h4 class="font-bold mb-1">StiprybÄ—s ğŸ’ª</h4>
                            <ul class="list-disc list-inside text-sm">
                                <li>Personalizuotas mokymasis</li>
                                <li>Pagerintas prieinamumas</li>
                                <li>Veiklos efektyvumas</li>
                                <li>Duomenimis pagrÄ¯stos Ä¯Å¾valgos</li>
                            </ul>
                        </div>
                        <div class="swot-item bg-red-100 text-red-700">
                            <h4 class="font-bold mb-1">SilpnybÄ—s ğŸ“‰</h4>
                            <ul class="list-disc list-inside text-sm">
                                <li>DuomenÅ³ privatumo problemos</li>
                                <li>DidelÄ—s pradinÄ—s iÅ¡laidos</li>
                                <li>SkaitmeninÄ—s atskirties problemos</li>
                                <li>MokytojÅ³ mokymo poreikis</li>
                            </ul>
                        </div>
                        <div class="swot-item bg-blue-100 text-blue-700">
                            <h4 class="font-bold mb-1">GalimybÄ—s ğŸš€</h4>
                            <ul class="list-disc list-inside text-sm">
                                <li>NeiÅ¡naudotos pasaulinÄ—s rinkos</li>
                                <li>Integracija su VR/AR</li>
                                <li>Ä®moniÅ³ kvalifikacijos kÄ—limas</li>
                                <li>VisÄ… gyvenimÄ… trunkanÄio mokymosi platformos</li>
                            </ul>
                        </div>
                        <div class="swot-item bg-yellow-100 text-yellow-700">
                            <h4 class="font-bold mb-1">GrÄ—smÄ—s âš ï¸</h4>
                            <ul class="list-disc list-inside text-sm">
                                <li>Spartus technologijÅ³ pasenimas</li>
                                <li>Etiniai DI iÅ¡Å¡Å«kiai</li>
                                <li>Atsparumas pokyÄiams</li>
                                <li>Kibernetinio saugumo rizika</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="consumer" class="mb-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">VartotojÅ³ Ä®Å¾valgos</h2>
            <p class="text-gray-700 mb-4 text-center max-w-2xl mx-auto">MokiniÅ³ ir pedagogÅ³ poreikiÅ³ ir motyvacijos supratimas yra labai svarbus kuriant sÄ—kmingus DI Å¡vietimo technologijÅ³ sprendimus. Å iame skyriuje nagrinÄ—jama, kÄ… vartotojai labiausiai vertina.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Pagrindiniai priÄ—mimo veiksniai</h3>
                    <p class="text-sm text-gray-600 mb-2">Å i radaro diagrama rodo Ä¯vairiÅ³ veiksniÅ³, turinÄiÅ³ Ä¯takos DI Å¡vietimo technologijÅ³ Ä¯rankiÅ³ priÄ—mimui, santykinÄ™ svarbÄ…, remiantis vartotojÅ³ apklausomis (balai 1-5).</p>
                    <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('Pagrindiniai priÄ—mimo veiksniai', 'Svarbos balai uÅ¾ pagerintus rezultatus (4.5), laiko taupymÄ… (4.0), ekonomiÅ¡kumÄ… (3.5), Ä¯sitraukimÄ… (4.2) ir prieinamumÄ… (3.8).')">âœ¨ IÅ¡samiau</button>
                    <div class="chart-container h-[350px] md:h-[400px]">
                        <canvas id="adoptionDriversChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Pirminiai vartotojÅ³ poreikiai</h3>
                    <p class="text-sm text-gray-600 mb-4">Mokiniai ir pedagogai pirmenybÄ™ teikia sprendimams, kurie yra Ä¯traukiantys, efektyvÅ«s ir siÅ«lo personalizuotÄ… palaikymÄ… bei lankstumÄ….</p>
                    <ul class="space-y-3">
                        <li class="flex items-center text-lg"><span class="mr-3 text-2xl text-[#06D6A0]">ğŸ“</span> Ä®traukiantis ir interaktyvus turinys</li>
                        <li class="flex items-center text-lg"><span class="mr-3 text-2xl text-[#FFD166]">ğŸ“ˆ</span> IÅ¡matuojama paÅ¾anga ir rezultatai</li>
                        <li class="flex items-center text-lg"><span class="mr-3 text-2xl text-[#118AB2]">ğŸ‘©â€ğŸ«</span> Personalizuotas palaikymas ir grÄ¯Å¾tamasis ryÅ¡ys</li>
                        <li class="flex items-center text-lg"><span class="mr-3 text-2xl text-[#FF6B6B]">ğŸŒ</span> Lankstus ir prieinamas mokymasis</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="future" class="mb-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">Ateities Perspektyvos ir GalimybÄ—s</h2>
            <p class="text-gray-700 mb-4 text-center max-w-2xl mx-auto">DI ateitis Å¡vietimo technologijose yra daug Å¾adanti, numatomas reikÅ¡mingas augimas Ä¯vairiuose regionuose ir atsirandanÄios naujos galimybÄ—s visoje vertÄ—s grandinÄ—je.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">Prognozuojamas CAGR pagal regionÄ… (kiti 5 metai)</h3>
                    <p class="text-sm text-gray-600 mb-2">Tikimasi, kad Azijos ir Ramiojo vandenyno regionas pirmauja augimu, skatinamas didelio studentÅ³ skaiÄiaus ir didÄ—janÄiÅ³ vyriausybÄ—s investicijÅ³ Ä¯ skaitmeninÄ¯ Å¡vietimÄ….</p>
                    <button class="bg-[#06D6A0] text-white px-4 py-2 rounded-md hover:bg-[#05B88D] focus:outline-none focus:ring-2 focus:ring-[#06D6A0] focus:ring-opacity-50 text-sm mb-4" onclick="showLlmDeepDive('Prognozuojamas CAGR pagal regionÄ…', 'Prognozuojamas sudÄ—tinis metinis augimo tempas (CAGR) Å iaurÄ—s Amerikai (18%), Europai (22%), Azijos ir Ramiojo vandenyno regionui (30%), LotynÅ³ Amerikai (25%) ir MEA (20%).')">âœ¨ IÅ¡samiau</button>
                    <div class="chart-container h-[350px] md:h-[400px]">
                        <canvas id="regionalGrowthChart"></canvas>
                    </div>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold section-title mb-4">AtsirandanÄios vertÄ—s grandinÄ—s galimybÄ—s</h3>
                    <p class="text-sm text-gray-600 mb-4">DI kuria naujÄ… vertÄ™ kiekviename Å¡vietimo proceso etape, skatindamas labiau tarpusavyje sujungtÄ… ir protingÄ… mokymosi ekosistemÄ….</p>
                    <div class="space-y-4">
                        <div class="flow-item">DI papildytas turinio kÅ«rimas</div>
                        <div class="flow-arrow">â¬‡ï¸</div>
                        <div class="flow-item">DebesÅ³ pagrindu veikianÄiÅ³ platformÅ³ pristatymas</div>
                        <div class="flow-arrow">â¬‡ï¸</div>
                        <div class="flow-item">Adaptyvus DI personalizuotas mokymasis</div>
                        <div class="flow-arrow">â¬‡ï¸</div>
                        <div class="flow-item">Automatinis vertinimas ir grÄ¯Å¾tamasis ryÅ¡ys</div>
                        <div class="flow-arrow">â¬‡ï¸</div>
                        <div class="flow-item">Duomenimis pagrÄ¯sta visÄ… gyvenimÄ… trunkanÄio mokymosi ekosistema</div>
                    </div>
                    <button class="bg-[#118AB2] text-white px-4 py-2 rounded-md hover:bg-[#0E7DA0] focus:outline-none focus:ring-2 focus:ring-[#118AB2] focus:ring-opacity-50 mt-6 w-full" onclick="generateFutureScenario()">âœ¨ Generuoti ateities scenarijÅ³</button>
                </div>
            </div>
        </section>

        <section id="qa" class="mb-12 pt-16 -mt-16">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">Klausimai ir Atsakymai apie DI Å vietimo Technologijose</h2>
            <div class="card p-6">
                <p class="mb-4 text-lg">UÅ¾duokite klausimÄ… apie infografikos turinÄ¯ ir gaukite DI sugeneruotÄ… atsakymÄ….</p>
                <div class="mb-4">
                    <label for="qaInput" class="block text-sm font-medium text-gray-700 mb-2">JÅ«sÅ³ klausimas:</label>
                    <textarea id="qaInput" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-[#118AB2] focus:border-[#118AB2]"></textarea>
                </div>
                <button class="bg-[#073B4C] text-white px-6 py-2 rounded-md hover:bg-[#052F3A] focus:outline-none focus:ring-2 focus:ring-[#073B4C] focus:ring-opacity-50 text-lg w-full" onclick="askQuestion()">âœ¨ Klausti</button>
                <div id="qaResponse" class="mt-6 p-4 bg-gray-50 rounded-md border border-gray-200 text-gray-800 hidden">
                    <h4 class="font-semibold mb-2">Atsakymas:</h4>
                    <p id="qaResponseContent"></p>
                </div>
            </div>
        </section>

        <footer class="text-center py-8 border-t border-gray-300">
            <p class="text-gray-600">&copy; 2025 DI Å¡vietimo technologijÅ³ rinkos Ä¯Å¾valgos. Visos teisÄ—s saugomos.</p>
            <p class="text-sm text-gray-500 mt-1">Å i infografika pateikia apibendrintÄ… apÅ¾valgÄ…, pagrÄ¯stÄ… pramonÄ—s analize.</p>
        </footer>

    </div>

    <div id="llmModal" class="fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 w-11/12 md:w-1/2 lg:w-1/3">
            <div class="flex justify-between items-center mb-4">
                <h3 id="llmModalTitle" class="text-xl font-bold text-[#073B4C]"></h3>
                <button id="closeLlmModal" class="text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
            </div>
            <div id="llmModalContent" class="text-gray-700 text-base mb-4"></div>
            <div id="llmLoadingIndicator" class="text-center text-[#118AB2] hidden">Ä®keliama...</div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        let app;
        let auth;

        async function initializeFirebaseAndAuth() {
            try {
                const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
                app = initializeApp(firebaseConfig);
                auth = getAuth(app);

                if (typeof __initial_auth_token !== 'undefined') {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Klaida inicijuojant Firebase arba prisijungiant:", error);
            }
        }
        initializeFirebaseAndAuth();

        const primaryTextColor = '#073B4C';
        const gridColor = '#E5E7EB';
        const tooltipBackgroundColor = '#FFFFFF';
        const tooltipTitleColor = '#073B4C';
        const tooltipBodyColor = '#374151';

        const chartColors = ['#118AB2', '#06D6A0', '#FFD166', '#FF6B6B', '#073B4C', '#EE92C2'];

        function wrapLabel(str, maxWidth) {
            if (str.length <= maxWidth) {
                return str;
            }
            const words = str.split(' ');
            let currentLine = '';
            const lines = [];
            for (const word of words) {
                if ((currentLine + word).length <= maxWidth || currentLine === '') {
                    currentLine += (currentLine === '' ? '' : ' ') + word;
                } else {
                    lines.push(currentLine);
                    currentLine = word;
                }
            }
            lines.push(currentLine);
            return lines;
        }
        
        const commonChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    labels: {
                        color: primaryTextColor,
                        font: { size: 12 }
                    }
                },
                tooltip: {
                    backgroundColor: tooltipBackgroundColor,
                    titleColor: tooltipTitleColor,
                    bodyColor: tooltipBodyColor,
                    borderColor: '#06D6A0',
                    borderWidth: 1,
                    padding: 10,
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                              return label.join(' ');
                            } else {
                              return label;
                            }
                        }
                    }
                }
            },
            scales: {
                x: {
                    ticks: { color: primaryTextColor, font: { size: 11 } },
                    grid: { color: gridColor, drawOnChartArea: false }
                },
                y: {
                    ticks: { color: primaryTextColor, font: { size: 11 } },
                    grid: { color: gridColor }
                }
            }
        };

        new Chart(document.getElementById('marketSizeChart'), {
            type: 'line',
            data: {
                labels: ['2020', '2021', '2022', '2023', wrapLabel('2024 Prognozuojama', 16), wrapLabel('2025 Prognozuojama', 16)],
                datasets: [{
                    label: 'Rinkos vertÄ— (mlrd. USD)',
                    data: [5.2, 8.1, 12.5, 19.0, 28.5, 40.0],
                    borderColor: chartColors[0],
                    backgroundColor: chartColors[0] + '33',
                    tension: 0.3,
                    fill: true,
                }]
            },
            options: {...commonChartOptions}
        });

        new Chart(document.getElementById('marketSegmentationChart'), {
            type: 'doughnut',
            data: {
                labels: [wrapLabel('Ikimokyklinis-12 Å vietimas', 16), wrapLabel('AukÅ¡tasis Mokslas', 16), wrapLabel('Ä®moniÅ³ Mokymai', 16), wrapLabel('VisÄ… GyvenimÄ… Besimokantys', 16)],
                datasets: [{
                    label: 'Rinkos dalis %',
                    data: [40, 30, 20, 10],
                    backgroundColor: chartColors,
                    borderColor: '#FFFFFF',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                 plugins: {
                    legend: { position: 'bottom', labels: { color: primaryTextColor, font: { size: 12 } } },
                    tooltip: commonChartOptions.plugins.tooltip
                }
            }
        });

        new Chart(document.getElementById('techAdoptionChart'), {
            type: 'bar',
            data: {
                labels: [wrapLabel('DI Mokymo Sistemos', 16), wrapLabel('Personalizuoti Mokymosi Keliai', 16), wrapLabel('AutomatinÄ—s Vertinimo Sistemos', 16), wrapLabel('DI pagrÄ¯stas Turinio KÅ«rimas', 16), wrapLabel('IÅ¡manieji PrieÅ¾iÅ«ros Ä®rankiai', 16)],
                datasets: [{
                    label: 'PriÄ—mimo rodiklis (%)',
                    data: [65, 75, 50, 40, 30],
                    backgroundColor: chartColors[2],
                    borderColor: chartColors[2],
                    borderWidth: 1
                }]
            },
            options: {
                ...commonChartOptions,
                indexAxis: 'y', 
                scales: {
                    x: { ...commonChartOptions.scales.x, grid: { drawOnChartArea: true } },
                    y: { ...commonChartOptions.scales.y, grid: { drawOnChartArea: false } }
                }
            }
        });

        new Chart(document.getElementById('marketShareChart'), {
            type: 'bar',
            data: {
                labels: [wrapLabel('LearnSphere AI', 16), wrapLabel('EduBotics Inc.', 16), wrapLabel('AdaptiveMind Tech', 16)],
                datasets: [{
                    label: 'ApytikslÄ— rinkos dalis (%)',
                    data: [35, 28, 22],
                    backgroundColor: [chartColors[0], chartColors[1], chartColors[3]],
                    borderColor: [chartColors[0], chartColors[1], chartColors[3]],
                    borderWidth: 1
                }]
            },
            options: {...commonChartOptions, plugins: {...commonChartOptions.plugins, legend: {display: false}}}
        });

        new Chart(document.getElementById('adoptionDriversChart'), {
            type: 'radar',
            data: {
                labels: [wrapLabel('Pagerinti Rezultatai', 16), wrapLabel('Laiko Taupymas', 16), wrapLabel('EkonomiÅ¡kumas', 16), 'Ä®sitraukimas', 'Prieinamumas'],
                datasets: [{
                    label: 'Svarbos balas (1-5)',
                    data: [4.5, 4.0, 3.5, 4.2, 3.8],
                    backgroundColor: chartColors[1] + '66', 
                    borderColor: chartColors[1],
                    pointBackgroundColor: chartColors[1],
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: chartColors[1]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top', labels: { color: primaryTextColor, font: {size: 12} } },
                    tooltip: commonChartOptions.plugins.tooltip
                },
                scales: {
                    r: {
                        angleLines: { color: gridColor },
                        grid: { color: gridColor },
                        pointLabels: { color: primaryTextColor, font: { size: 11 } },
                        ticks: { backdropColor: 'transparent', color: primaryTextColor, stepSize: 1, font: {size: 10} },
                        min: 0,
                        max: 5
                    }
                }
            }
        });

        new Chart(document.getElementById('regionalGrowthChart'), {
            type: 'bar',
            data: {
                labels: [wrapLabel('Å iaurÄ—s Amerika', 16), 'Europa', wrapLabel('Azijos ir Ramiojo vandenyno', 16), wrapLabel('LotynÅ³ Amerika', 16), 'MEA'],
                datasets: [{
                    label: 'Prognozuojamas CAGR (%)',
                    data: [18, 22, 30, 25, 20],
                    backgroundColor: chartColors[3],
                    borderColor: chartColors[3],
                    borderWidth: 1
                }]
            },
             options: {...commonChartOptions, plugins: {...commonChartOptions.plugins, legend: {display: false}}}
        });

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    const offset = document.querySelector('.nav-sticky').offsetHeight;
                    const elementPosition = targetElement.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - offset;
                    
                    window.scrollTo({
                        top: offsetPosition,
                        behavior: "smooth"
                    });
                }
            });
        });

        const llmModal = document.getElementById('llmModal');
        const llmModalTitle = document.getElementById('llmModalTitle');
        const llmModalContent = document.getElementById('llmModalContent');
        const llmLoadingIndicator = document.getElementById('llmLoadingIndicator');
        const closeLlmModal = document.getElementById('closeLlmModal');

        closeLlmModal.addEventListener('click', () => {
            llmModal.classList.add('hidden');
        });

        llmModal.addEventListener('click', (event) => {
            if (event.target === llmModal) {
                llmModal.classList.add('hidden');
            }
        });

        async function callGeminiAPI(prompt) {
            llmLoadingIndicator.classList.remove('hidden');
            llmModalContent.innerHTML = ''; 

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    llmModalContent.innerHTML = text;
                } else {
                    llmModalContent.innerHTML = "AtsipraÅ¡ome, nepavyko sugeneruoti atsakymo. Bandykite dar kartÄ….";
                    console.error("NetikÄ—ta API atsakymo struktÅ«ra:", result);
                }
            } catch (error) {
                llmModalContent.innerHTML = "Ä®vyko klaida gaunant atsakymÄ…. Patikrinkite savo tinklo ryÅ¡Ä¯.";
                console.error("Klaida kvieÄiant Gemini API:", error);
            } finally {
                llmLoadingIndicator.classList.add('hidden');
            }
        }

        window.showLlmDeepDive = async function(chartTitle, chartDataDescription) {
            llmModalTitle.textContent = `IÅ¡samiau: ${chartTitle}`;
            llmModal.classList.remove('hidden');
            const prompt = `PaaiÅ¡kinkite pagrindines tendencijas ir pasekmes, parodytas diagramoje apie "${chartTitle}", su duomenÅ³ taÅ¡kais, tokiais kaip "${chartDataDescription}". Sutelkite dÄ—mesÄ¯ Ä¯ tai, kÄ… Å¡ie duomenys reiÅ¡kia DI Å¡vietimo technologijÅ³ rinkai. BÅ«kite glausti, maÅ¾daug 4-5 sakiniai.`;
            await callGeminiAPI(prompt);
        }

        window.generateFutureScenario = async function() {
            llmModalTitle.textContent = 'Ateities Scenarijus DI Å¡vietimo technologijose';
            llmModal.classList.remove('hidden');
            const prompt = `Remiantis dabartinÄ—mis DI Å¡vietimo technologijÅ³ tendencijomis, sugeneruokite trumpÄ…, iÅ¡radingÄ… ir realistiÅ¡kÄ… ateities scenarijÅ³ (pvz., po 5-10 metÅ³), sutelkiant dÄ—mesÄ¯ Ä¯ tai, kaip mokymasis gali bÅ«ti transformuotas. BÅ«kite glausti, maÅ¾daug 3-4 sakiniai.`;
            await callGeminiAPI(prompt);
        }

        window.askQuestion = async function() {
            const qaInput = document.getElementById('qaInput');
            const question = qaInput.value.trim();
            const qaResponseDiv = document.getElementById('qaResponse');
            const qaResponseContent = document.getElementById('qaResponseContent');

            if (!question) {
                qaResponseContent.textContent = 'PraÅ¡ome Ä¯vesti klausimÄ….';
                qaResponseDiv.classList.remove('hidden');
                return;
            }

            llmModalTitle.textContent = 'Atsakymas Ä¯ klausimÄ…';
            llmModal.classList.remove('hidden');
            qaResponseDiv.classList.add('hidden'); // Hide previous response if any

            const fullReportContent = document.body.innerText; // Get all visible text from the body
            const prompt = `Atsakykite Ä¯ Å¡Ä¯ klausimÄ… remdamiesi pateikta informacija apie dirbtinio intelekto panaudojimÄ… Å¡vietimo technologijose. Jei atsakymo nÄ—ra pateiktoje informacijoje, nurodykite tai. Klausimas: "${question}". Informacija: ${fullReportContent.substring(0, 3000)}...`; // Limit content length
            await callGeminiAPI(prompt);
            qaResponseDiv.classList.remove('hidden');
            qaResponseContent.textContent = llmModalContent.textContent; // Copy LLM response to Q&A section
            llmModal.classList.add('hidden'); // Close modal after copying to Q&A section
        }

    </script>
</body>
</html>
